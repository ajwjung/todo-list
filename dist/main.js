(()=>{"use strict";const e=(()=>{const e=e=>(e=>/\-/g.test(e))(e)?e.replace(/\-/g," "):e,t=e=>e.toLowerCase().split(" ").map((e=>e.charAt(0).toUpperCase()+e.substring(1))).join(" ");return{replaceHyphensWithSpaces:e,getHyphenatedName:e=>(e=>/\s/g.test(e))(e)?e.replace(/\s+/g,"-"):e,capitalizeFirstLetters:t,makeNamePresentable:a=>{const n=e(a);return t(n)}}})(),t=(()=>{let n,s=["default"],r={default:[]},d=!1;return{checkNewCategoryAdded:t=>{const a=e.getHyphenatedName(t).toLowerCase();return s.includes(a)||(d=!0),d},resetCategoryAdded:()=>{d=!1},pushNewCategory:t=>{s.push(e.getHyphenatedName(t))},checkTaskHasCategory:e=>r.hasOwnProperty(e),addCategoryToObject:t=>{r[e.getHyphenatedName(t)]=[]},pushNewTask:()=>{const e=a.TodoTask("new task");r[e.category].push(e),console.log(r)},pushEditedTask:()=>{const e=a.TodoTask("edit task");n=e,r[e.category].push(e),console.log(r)},updateArr:(e,t)=>{r[e]=t,console.log(r)},getUpdatedTask:()=>n,getRelevantTasks:e=>t.allTasks[e],allCategories:s,allTasks:r}})(),a=(()=>{const e=()=>document.querySelector("input[name='categoryName']").value,a=e=>{let t,a,n,s,r,d;return"new task"==e?(t=document.getElementById("task-title").value,a=document.getElementById("task-description").value,n=document.getElementById("task-notes").value,s=document.getElementById("task-due-date").value,r=document.getElementById("priority-level").value,d=document.getElementById("task-category").value):"edit task"==e&&(t=document.getElementById("edit-task-title").value,a=document.getElementById("edit-task-description").value,n=document.getElementById("edit-task-notes").value,s=document.getElementById("edit-task-due-date").value,r=document.getElementById("edit-priority-level").value,d=document.getElementById("edit-task-category").value),{title:t,description:a,notes:n,dueDate:s,priority:r,category:d}};return{getCategoryName:e,newCategoryHandler:()=>{const a=e();t.checkTaskHasCategory(a)||t.addCategoryToObject(a),t.pushNewCategory(a)},TodoTask:a,getTaskObject:e=>a(e),newTaskHandler:e=>{t.pushNewTask(a(e))}}})(),n=(()=>{const a=()=>t.allCategories[t.allCategories.length-1];return{getNewCategory:a,appendCategoryDiv:()=>{const t=document.querySelector(".expanded-sidebar"),n=(t=>{const a=document.createElement("div");return a.setAttribute("id",t),a.classList.add("category"),a.textContent=e.makeNamePresentable(t),a})(a());t.insertBefore(n,t.lastElementChild)}}})(),s=(()=>{const t=document.querySelector(".display-container");return{addOptionsToSelect:t=>{const a=document.getElementById(t),s=n.getNewCategory();a.add(new Option(e.makeNamePresentable(s),s))},clearContents:()=>{t.innerHTML=""},createDiv:(e,t)=>{const a=document.createElement("div");return a.classList.add(e),t&&a.classList.add(t),a},createPara:(e,t)=>{const a=document.createElement("p");return a.classList.add(e),a.textContent=t,a},createCategoryH1:t=>{const a=document.createElement("h1");return a.setAttribute("id","category-name"),a.textContent=e.makeNamePresentable(t),a},appendH1:e=>{t.appendChild(e)},createViewBtn:()=>{const e=document.createElement("button");return e.setAttribute("type","button"),e.classList.add("view-details"),e.classList.add("filter-pink"),e},createEditBtn:()=>{const e=document.createElement("button");return e.setAttribute("type","button"),e.classList.add("edit-details"),e.classList.add("filter-pink"),e},createDeleteBtn:()=>{const e=document.createElement("button");return e.setAttribute("type","button"),e.classList.add("delete-task"),e.classList.add("filter-pink"),e},expandCollapseTabs:(e,t)=>{const a=document.querySelector(e),n=document.querySelector(t);a.addEventListener("click",(function(e){n.classList.toggle("hidden")}))}}})(),r=(()=>{const e=document.querySelector(".display-container"),a=document.querySelector(".backdrop"),n=document.getElementById("close-popup"),s=document.getElementById("edit-task-form");let r,d,l=!1;const u=()=>r,p=()=>{a.classList.add("hidden")},g=()=>d;return{getCurrentDiv:u,getCurrentTask:g,getTaskStatus:()=>l,editTaskHandler:()=>{e.addEventListener("click",(function(e){e.target.classList.contains("edit-details")&&(a.classList.remove("hidden"),(e=>{const a=o.getDivDescription(e.target.parentNode),n=i.getTabName();let s=t.getRelevantTasks(n);for(let e=0;e<s.length;e++)s[e].description==a&&(d=s[e])})(e),(e=>{r=e.target.parentNode})(e),(()=>{const e=g(),t=document.getElementById("edit-task-title"),a=document.getElementById("edit-task-description"),n=document.getElementById("edit-task-notes"),s=document.getElementById("edit-task-due-date"),r=document.getElementById("edit-priority-level"),d=document.getElementById("edit-task-category");t.setAttribute("value",e.title),a.setAttribute("value",e.description),n.value=e.notes,s.setAttribute("value",e.dueDate),r.value=e.priority,d.value=e.category})(),l=!1)})),n.addEventListener("click",(function(e){p()})),s.addEventListener("submit",(function(e){e.preventDefault(),(()=>{const e=g(),a=e.category;c.deleteObjectHandler(t.getRelevantTasks(a),e.description,a),t.pushEditedTask()})(),s.reset(),p(),(()=>{const e=t.getUpdatedTask(),a=u();if(e.category==i.getTabName()){a.querySelector(".title").textContent=e.title,a.querySelector(".description").textContent=e.description,a.querySelector(".task-date").textContent=e.dueDate;const t=a.querySelector(".priority-indicator").classList;for(const a in["low","medium","high"])a in t&&(t.remove(a),t.add(e.priority))}else c.deleteTaskCard(a.parentNode,a)})(),l=!0}))}}})(),d=(()=>{const e=e=>{const t=document.querySelector(".display-container"),a=(e=>{const t=s.createDiv("task-container"),a=(e=>{const t=s.createDiv("task-overview","strikethrough"),a=s.createDiv("priority-indicator",e.priority),n=s.createDiv("checkbox","unchecked"),r=s.createPara("title",e.title),d=s.createPara("description",e.description),o=s.createPara("task-date",e.dueDate),c=s.createViewBtn(),i=s.createEditBtn(),l=s.createDeleteBtn();return t.appendChild(a),t.appendChild(n),t.appendChild(r),t.appendChild(d),t.appendChild(o),t.appendChild(c),t.appendChild(i),t.appendChild(l),t})(e);return t.appendChild(a),t})(e),n=a.querySelector(".view-details"),r=a.querySelector(".checkbox");var d;(d=r).addEventListener("click",(function(e){d.parentNode.classList.toggle("strikethrough"),d.classList.toggle("unchecked")})),o.expandDiv(n,a,e),t.appendChild(a)};return{createTaskDetails:e=>{const t=s.createDiv("task-details"),a=s.createPara("task-notes",e.notes);return t.appendChild(a),t},toggleViewDetails:e=>{e.classList.toggle("hide-details")},appendTaskDiv:e,createAllTaskDivs:()=>{const a=i.getTabName();t.getRelevantTasks(a).forEach((t=>{e(t)}))}}})(),o=(()=>{let e={};const a=e=>e.querySelector(".description").textContent,n=t=>e.hasOwnProperty(a(t)),s=t=>e[a(t)],o=t=>{e[a(t)]=!0},c=(e,t)=>{const a=d.createTaskDetails(t);e.appendChild(a)};return{getDivDescription:a,expandDiv:(i,l,u)=>{i.addEventListener("click",(function(p){d.toggleViewDetails(i),((r,d,i)=>{n(r)?n(r)&&s(r)?(r.classList.toggle("expand-task"),(e=>{e.removeChild(e.lastElementChild)})(r),e[a(r)]=!1):n(r)&&!s(r)&&(r.classList.toggle("expand-task"),c(r,i?t.getUpdatedTask():d),o(r)):(r.classList.toggle("expand-task"),c(r,i?t.getUpdatedTask():d),o(r))})(l,u,r.getTaskStatus())}))}}})(),c=(()=>{const a=document.querySelector(".display-container"),n=(e,a,n)=>{const s=e.filter((e=>e.description!==a));t.updateArr(n,s)},s=(e,t)=>{e.removeChild(t)};return{deleteObjectHandler:n,deleteTaskCard:s,removeTaskHandler:()=>{a.addEventListener("click",(function(r){r.target.classList.contains("delete-task")&&(s(a,r.target.parentNode.parentNode),(s=>{const r=o.getDivDescription(s.target.parentNode),d=a.firstElementChild.textContent,c=e.getHyphenatedName(d.toLowerCase());let i=t.getRelevantTasks(c);n(i,r,c)})(r))}))}}})(),i=(()=>{let e="default";const t=()=>e,a=e=>{e.classList.add("active-div")};return{getTabName:t,setThisDivActive:a,tabHandler:()=>{document.querySelector(".expanded-sidebar").addEventListener("click",(function(n){if(n.target.classList.contains("category")){document.querySelectorAll(".category").forEach((e=>{e.classList.remove("active-div")})),a(n.target),r=n.target.id,e=r,s.clearContents();const o=s.createCategoryH1(t());s.appendH1(o),d.createAllTaskDivs()}var r}))}}})(),l=()=>{const e=document.querySelector("#projects-form");e.addEventListener("submit",(function(r){r.preventDefault(),t.checkNewCategoryAdded(a.getCategoryName())&&(a.newCategoryHandler(),n.appendCategoryDiv(),s.addOptionsToSelect("task-category"),s.addOptionsToSelect("edit-task-category"),e.reset(),t.resetCategoryAdded())}))},u=()=>{const e=document.querySelector("#task-form");e.addEventListener("submit",(function(t){t.preventDefault(),a.newTaskHandler(t);const n=i.getTabName(),s=a.getTaskObject("new task");s.category==n&&d.appendTaskDiv(s),e.reset()}))},p=()=>{const e=document.getElementById("default");i.setThisDivActive(e)};(()=>{document.querySelector("#task-due-date").min=(new Date).toISOString().split("T")[0],p(),s.expandCollapseTabs(".sidebar",".expanded-sidebar"),s.expandCollapseTabs("#add-new-task",".task-form-container");const e=s.createCategoryH1(i.getTabName());s.appendH1(e),l(),u(),i.tabHandler(),c.removeTaskHandler(),r.editTaskHandler()})()})();